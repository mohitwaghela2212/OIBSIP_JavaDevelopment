<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Train Reservation System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="text"],
        input[type="password"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .nav-btn:hover {
            border-color: #667eea;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .success-message,
        .error-message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .ticket-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .ticket-info h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .ticket-info p {
            margin-bottom: 10px;
            color: #555;
        }

        .ticket-info strong {
            color: #333;
        }

        .booking-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .booking-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .booking-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .pnr-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .status-badge {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .booking-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            font-size: 14px;
        }

        .detail-label {
            color: #666;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #333;
            font-weight: 600;
        }

        @media (max-width: 600px) {
            .row {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 20px;
            }

            .header h1 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš‚ Online Train Reservation System</h1>
            <p>Book, Manage & Cancel Your Train Tickets</p>
        </div>

        <div class="content">
            <!-- Login Form -->
            <div class="form-section active" id="loginSection">
                <h2 style="margin-bottom: 20px; color: #333;">Login to Continue</h2>
                <div class="success-message" id="loginSuccess"></div>
                <div class="error-message" id="loginError"></div>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername">Username *</label>
                        <input type="text" id="loginUsername" required placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password *</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
                <p style="margin-top: 15px; color: #666; font-size: 13px;">
                    Demo credentials: Username: <strong>admin</strong> | Password: <strong>admin123</strong>
                </p>
            </div>

            <!-- Main Navigation (Hidden until login) -->
            <div class="form-section" id="mainSection">
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showSection('reservation')">New Reservation</button>
                    <button class="nav-btn" onclick="showSection('bookings')">My Bookings</button>
                    <button class="nav-btn" onclick="showSection('cancellation')">Cancel Ticket</button>
                    <button class="nav-btn" onclick="logout()">Logout</button>
                </div>

                <!-- Reservation Form -->
                <div id="reservationForm" class="subsection">
                    <h2 style="margin-bottom: 20px; color: #333;">Book Your Ticket</h2>
                    <div class="success-message" id="reservationSuccess"></div>
                    
                    <form id="bookingForm">
                        <h3 style="color: #667eea; margin-bottom: 15px;">Passenger Details</h3>
                        <div class="row">
                            <div class="form-group">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" required placeholder="Enter first name">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" required placeholder="Enter last name">
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" required placeholder="example@email.com">
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number *</label>
                                <input type="tel" id="phone" required placeholder="+91 1234567890">
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label for="age">Age *</label>
                                <input type="number" id="age" required min="1" max="120" placeholder="Enter age">
                            </div>
                            <div class="form-group">
                                <label for="numTickets">Number of Tickets *</label>
                                <input type="number" id="numTickets" required min="1" max="6" value="1" placeholder="Enter number of tickets">
                            </div>
                        </div>

                        <h3 style="color: #667eea; margin: 25px 0 15px 0;">Journey Details</h3>
                        
                        <div class="form-group">
                            <label for="trainNumber">Train Number *</label>
                            <select id="trainNumber" required onchange="updateTrainName()">
                                <option value="">Select Train Number</option>
                                <option value="12345">12345</option>
                                <option value="12346">12346</option>
                                <option value="12347">12347</option>
                                <option value="12348">12348</option>
                                <option value="12349">12349</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="trainName">Train Name</label>
                            <input type="text" id="trainName" readonly placeholder="Auto-filled based on train number">
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label for="fromStation">From (Station) *</label>
                                <input type="text" id="fromStation" required placeholder="e.g., Mumbai Central">
                            </div>
                            <div class="form-group">
                                <label for="toStation">To (Destination) *</label>
                                <input type="text" id="toStation" required placeholder="e.g., Delhi">
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label for="classType">Class Type *</label>
                                <select id="classType" required>
                                    <option value="">Select Class</option>
                                    <option value="AC 1st Class">AC 1st Class</option>
                                    <option value="AC 2 Tier">AC 2 Tier</option>
                                    <option value="AC 3 Tier">AC 3 Tier</option>
                                    <option value="Sleeper">Sleeper</option>
                                    <option value="General">General</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="journeyDate">Date of Journey *</label>
                                <input type="date" id="journeyDate" required>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Insert / Book Ticket</button>
                        <button type="reset" class="btn btn-secondary">Reset Form</button>
                    </form>
                </div>

                <!-- My Bookings Section -->
                <div id="bookingsSection" class="subsection" style="display: none;">
                    <h2 style="margin-bottom: 20px; color: #333;">My Bookings</h2>
                    <div id="bookingsList"></div>
                    <p id="noBookings" style="text-align: center; color: #999; padding: 40px; display: none;">
                        No bookings found. Book your first ticket!
                    </p>
                </div>

                <!-- Cancellation Form -->
                <div id="cancellationForm" class="subsection" style="display: none;">
                    <h2 style="margin-bottom: 20px; color: #333;">Cancel Your Ticket</h2>
                    <div class="success-message" id="cancelSuccess"></div>
                    <div class="error-message" id="cancelError"></div>
                    
                    <form id="pnrForm">
                        <div class="form-group">
                            <label for="pnrNumber">PNR Number *</label>
                            <input type="text" id="pnrNumber" required placeholder="Enter 10-digit PNR number" maxlength="10">
                        </div>
                        <button type="submit" class="btn btn-primary">Check PNR Status</button>
                    </form>

                    <div class="ticket-info" id="ticketInfo">
                        <h3>Ticket Details</h3>
                        <p><strong>PNR:</strong> <span id="displayPnr"></span></p>
                        <p><strong>Passenger:</strong> <span id="displayPassenger"></span></p>
                        <p><strong>Train:</strong> <span id="displayTrain"></span></p>
                        <p><strong>From:</strong> <span id="displayFrom"></span> <strong>To:</strong> <span id="displayTo"></span></p>
                        <p><strong>Class:</strong> <span id="displayClass"></span></p>
                        <p><strong>Journey Date:</strong> <span id="displayDate"></span></p>
                        <p><strong>Status:</strong> <span id="displayStatus" style="color: #28a745; font-weight: bold;">Confirmed</span></p>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-danger" onclick="confirmCancellation()">Confirm Cancellation</button>
                            <button class="btn btn-secondary" onclick="closeTicketInfo()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Train data
        const trains = {
            '12345': 'Rajdhani Express',
            '12346': 'Shatabdi Express',
            '12347': 'Duronto Express',
            '12348': 'Garib Rath',
            '12349': 'Humsafar Express'
        };

        // Store bookings
        let bookings = {};

        // Set minimum date to today
        document.getElementById('journeyDate').min = new Date().toISOString().split('T')[0];

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (username === 'admin' && password === 'admin123') {
                showMessage('loginSuccess', 'Login successful! Redirecting...');
                setTimeout(() => {
                    document.getElementById('loginSection').classList.remove('active');
                    document.getElementById('mainSection').classList.add('active');
                }, 1000);
            } else {
                showMessage('loginError', 'Invalid username or password!');
            }
        });

        // Update train name based on selection
        function updateTrainName() {
            const trainNumber = document.getElementById('trainNumber').value;
            const trainName = trains[trainNumber] || '';
            document.getElementById('trainName').value = trainName;
        }

        // Booking form submission
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const pnr = generatePNR();
            const numTickets = document.getElementById('numTickets').value;
            
            const booking = {
                pnr: pnr,
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                age: document.getElementById('age').value,
                numTickets: numTickets,
                trainNumber: document.getElementById('trainNumber').value,
                trainName: document.getElementById('trainName').value,
                from: document.getElementById('fromStation').value,
                to: document.getElementById('toStation').value,
                class: document.getElementById('classType').value,
                date: document.getElementById('journeyDate').value,
                status: 'Confirmed'
            };

            bookings[pnr] = booking;
            
            showMessage('reservationSuccess', `Booking successful! ${numTickets} ticket(s) booked. Your PNR is: ${pnr}. Please save this for future reference.`);
            document.getElementById('bookingForm').reset();
            
            setTimeout(() => {
                document.getElementById('reservationSuccess').style.display = 'none';
            }, 5000);
        });

        // PNR check form
        document.getElementById('pnrForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const pnr = document.getElementById('pnrNumber').value;

            if (bookings[pnr]) {
                const booking = bookings[pnr];
                document.getElementById('displayPnr').textContent = booking.pnr;
                document.getElementById('displayPassenger').textContent = `${booking.firstName} ${booking.lastName}`;
                document.getElementById('displayTrain').textContent = `${booking.trainNumber} - ${booking.trainName}`;
                document.getElementById('displayFrom').textContent = booking.from;
                document.getElementById('displayTo').textContent = booking.to;
                document.getElementById('displayClass').textContent = booking.class;
                document.getElementById('displayDate').textContent = booking.date;
                document.getElementById('displayStatus').textContent = booking.status;
                
                // Add number of tickets display
                const ticketInfo = document.getElementById('ticketInfo');
                const existingTicketsP = ticketInfo.querySelector('.tickets-count');
                if (existingTicketsP) {
                    existingTicketsP.remove();
                }
                const ticketsP = document.createElement('p');
                ticketsP.className = 'tickets-count';
                ticketsP.innerHTML = `<strong>Number of Tickets:</strong> ${booking.numTickets}`;
                ticketInfo.querySelector('h3').insertAdjacentElement('afterend', ticketsP);
                
                document.getElementById('ticketInfo').style.display = 'block';
                document.getElementById('cancelError').style.display = 'none';
            } else {
                showMessage('cancelError', 'No booking found with this PNR number!');
                document.getElementById('ticketInfo').style.display = 'none';
            }
        });

        // Confirm cancellation
        function confirmCancellation() {
            const pnr = document.getElementById('pnrNumber').value;
            if (confirm('Are you sure you want to cancel this ticket?')) {
                delete bookings[pnr];
                document.getElementById('ticketInfo').style.display = 'none';
                showMessage('cancelSuccess', 'Ticket cancelled successfully! Refund will be processed within 7 working days.');
                document.getElementById('pnrForm').reset();
                
                setTimeout(() => {
                    document.getElementById('cancelSuccess').style.display = 'none';
                }, 5000);
            }
        }

        // Close ticket info
        function closeTicketInfo() {
            document.getElementById('ticketInfo').style.display = 'none';
            document.getElementById('pnrForm').reset();
        }

        // Show section
        function showSection(section) {
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('reservationForm').style.display = 'none';
            document.getElementById('bookingsSection').style.display = 'none';
            document.getElementById('cancellationForm').style.display = 'none';

            if (section === 'reservation') {
                document.getElementById('reservationForm').style.display = 'block';
            } else if (section === 'bookings') {
                document.getElementById('bookingsSection').style.display = 'block';
                displayBookings();
            } else if (section === 'cancellation') {
                document.getElementById('cancellationForm').style.display = 'block';
            }
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                document.getElementById('mainSection').classList.remove('active');
                document.getElementById('loginSection').classList.add('active');
                document.getElementById('loginForm').reset();
            }
        }

        // Generate PNR
        function generatePNR() {
            return Math.floor(1000000000 + Math.random() * 9000000000).toString();
        }

        // Show message
        function showMessage(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }

        // Display all bookings
        function displayBookings() {
            const bookingsList = document.getElementById('bookingsList');
            const noBookings = document.getElementById('noBookings');
            
            bookingsList.innerHTML = '';
            
            const bookingKeys = Object.keys(bookings);
            
            if (bookingKeys.length === 0) {
                noBookings.style.display = 'block';
                return;
            }
            
            noBookings.style.display = 'none';
            
            bookingKeys.forEach(pnr => {
                const booking = bookings[pnr];
                const card = document.createElement('div');
                card.className = 'booking-card';
                card.innerHTML = `
                    <div class="booking-card-header">
                        <div class="pnr-badge">PNR: ${booking.pnr}</div>
                        <div class="status-badge">${booking.status}</div>
                    </div>
                    <div class="booking-details">
                        <div class="detail-item">
                            <div class="detail-label">Passenger Name</div>
                            <div class="detail-value">${booking.firstName} ${booking.lastName}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Number of Tickets</div>
                            <div class="detail-value">${booking.numTickets} Ticket(s)</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Train</div>
                            <div class="detail-value">${booking.trainNumber} - ${booking.trainName}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">From â†’ To</div>
                            <div class="detail-value">${booking.from} â†’ ${booking.to}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Class</div>
                            <div class="detail-value">${booking.class}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Journey Date</div>
                            <div class="detail-value">${booking.date}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Contact</div>
                            <div class="detail-value">${booking.email}</div>
                        </div>
                    </div>
                    <button class="btn btn-danger" onclick="cancelFromBookings('${booking.pnr}')">Cancel This Ticket</button>
                `;
                bookingsList.appendChild(card);
            });
        }

        // Cancel from bookings section
        function cancelFromBookings(pnr) {
            if (confirm('Are you sure you want to cancel this ticket?')) {
                delete bookings[pnr];
                displayBookings();
                alert('Ticket cancelled successfully! Refund will be processed within 7 working days.');
            }
        }
    </script>
</body>
</html>